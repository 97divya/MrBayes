srcdir    = @srcdir@
RM        = rm
CC        = @CC@
CFLAGS    = @CFLAGS@ -DUSECONFIG_H
LDFLAGS   = @LDFLAGS@ -lm
INSTALL   = @INSTALL@
BINDIR    = /usr/local/bin

SRC       =  bayes.c command.c mbmath.c mcmc.c model.c sump.c sumt.c tree.c utils.c mbbeagle.c best.c
OBJECTS   =  bayes.o command.o mbmath.o mcmc.o model.o sump.o sumt.o tree.o utils.o mbbeagle.o best.o
PROGS     =  mb

all: $(PROGS)

mb: $(OBJECTS)
	$(CC) $(CFLAGS) -o $@ $^ $(LDFLAGS)

install: $(PROGS)
	$(INSTALL) -m 755 $(PROGS) $(BINDIR)

clean:
	$(RM) -f *.o *~ mb

distclean: clean
	$(RM) -f Makefile config.log config.status config.cache config.h 

showdep:
	@$(CC) -MM $(SRC)

bayes.o: bayes.c bayes.h command.h mbmath.h mcmc.h model.h sumt.h utils.h
command.o: command.c bayes.h mbbeagle.h mbmath.h model.h mcmc.h sump.h sumt.h tree.h utils.h
mbmath.o: mbmath.c bayes.h mbmath.h model.h utils.h
mcmc.o: mcmc.c bayes.h mcmc.h model.h command.h mbmath.h sump.h sumt.h tree.h utils.h mbbeagle.h best.h
model.o: model.c bayes.h model.h command.h mcmc.h mbmath.h tree.h utils.h
sump.o: sump.c bayes.h command.h sump.h mbmath.h mcmc.h utils.h
sumt.o: sumt.c bayes.h command.h mbmath.h mcmc.h model.h sump.h sumt.h tree.h utils.h
tree.o: tree.c bayes.h best.h command.h mcmc.h mbmath.h model.h tree.h utils.h
utils.o: utils.c bayes.h utils.h
mbbeagle.o: mbbeagle.c bayes.h mbbeagle.h utils.h mcmc.h model.h
best.o: best.c bayes.h best.h command.h mbmath.h mcmc.h model.h sumt.h tree.h utils.h

