srcdir    = @srcdir@
RM        = rm
CC        = @CC@
CFLAGS    = @CFLAGS@ -DUSECONFIG_H
LDFLAGS   = @LDFLAGS@ -lm
INSTALL   = @INSTALL@
BINDIR    = /usr/local/bin

SRC       =  bayes.c command.c mcmc.c model.c sumpt.c utils.c mbbeagle.c best.c
OBJECTS   =  bayes.o command.o mcmc.o model.o sumpt.o utils.o mbbeagle.o best.o
PROGS     =  mb

all: $(PROGS)

mb: $(OBJECTS)
	$(CC) $(CFLAGS) -o $@ $^ $(LDFLAGS)

install: $(PROGS)
	$(INSTALL) -m 755 $(PROGS) $(BINDIR)

clean:
	$(RM) -f *.o *~ mb

distclean: clean
	$(RM) -f Makefile config.log config.status config.cache config.h 

showdep:
	@$(CC) -MM $(SRC)

bayes.o: bayes.c bayes.h command.h mcmc.h model.h sumpt.h utils.h
command.o: command.c bayes.h command.h mbbeagle.h model.h mcmc.h sumpt.h utils.h
mcmc.o: mcmc.c bayes.h best.h command.h mbbeagle.h mcmc.h model.h sumpt.h utils.h
model.o: model.c bayes.h best.h command.h model.h mcmc.h sumpt.h utils.h
sumpt.o: sumpt.c bayes.h command.h mcmc.h model.h sumpt.h utils.h
utils.o: utils.c bayes.h best.h command.h mcmc.h model.h utils.h
mbbeagle.o: mbbeagle.c bayes.h mbbeagle.h utils.h mcmc.h model.h
best.o: best.c bayes.h best.h command.h mcmc.h model.h sumpt.h utils.h
